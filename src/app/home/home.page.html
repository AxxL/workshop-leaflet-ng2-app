<ion-header>
  <ion-toolbar>
    <ion-title>
      Flight-Radar
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <yaga-map style="height: 100%;" [lat]="mapLat" [lng]="mapLng" [zoom]="mapZoom">
    <yaga-tile-layer [url]="tileLayerUrl" [attribution]="'Â© Openstreetmap and contributors'"></yaga-tile-layer>

    <yaga-attribution-control></yaga-attribution-control>
    <yaga-zoom-control></yaga-zoom-control>
    <yaga-scale-control [metric]="true" [imperial]="false"></yaga-scale-control>

    <yaga-marker *ngIf="debug" [draggable]="true" [(lat)]="pickerLat" [(lng)]="pickerLng">
        <yaga-div-icon></yaga-div-icon>
        <yaga-popup>
            "lat": {{ pickerLat }}, "lng": {{ pickerLng }}
        </yaga-popup>
    </yaga-marker>

    <yaga-circle-marker *ngFor="let airport of airports" [lat]="airport.lat" [lng]="airport.lng" [color]="'#333'">
        <yaga-popup>
            <h3>{{ airport.title }}</h3>
            <p>{{ airport.description }}</p>
        </yaga-popup>
    </yaga-circle-marker>

      <yaga-circle *ngFor="let aircraft of aircrafts" [lat]="aircraft.latitude" [lng]="aircraft.longitude" [radius]="calcRadius(aircraft)" [color]="calcColor(aircraft)">
          <yaga-popup>
              <div class="aircraft-info">
                  <h3>{{ aircraft.callsign }}</h3>
                  <table>
                      <tr>
                          <th>icao24</th>
                          <td>{{ aircraft.icao24 }}</td>
                      </tr>
                      <tr>
                          <th>callsign</th>
                          <td>{{ aircraft.callsign }}</td>
                      </tr>
                      <tr>
                          <th>origin_country</th>
                          <td>{{ aircraft.origin_country }}</td>
                      </tr>
                      <tr>
                          <th>time_position</th>
                          <td>{{ aircraft.time_position }}</td>
                      </tr>
                      <tr>
                          <th>last_contact</th>
                          <td>{{ aircraft.last_contact }}</td>
                      </tr>
                      <tr>
                          <th>longitude</th>
                          <td>{{ aircraft.longitude }}</td>
                      </tr>
                      <tr>
                          <th>latitude</th>
                          <td>{{ aircraft.latitude }}</td>
                      </tr>
                      <tr>
                          <th>baro_altitude</th>
                          <td>{{ aircraft.baro_altitude }}</td>
                      </tr>
                      <tr>
                          <th>on_ground</th>
                          <td>{{ aircraft.on_ground }}</td>
                      </tr>
                      <tr>
                          <th>velocity</th>
                          <td>{{ aircraft.velocity }}</td>
                      </tr>
                      <tr>
                          <th>true_track</th>
                          <td>{{ aircraft.true_track }}</td>
                      </tr>
                      <tr>
                          <th>vertical_rate</th>
                          <td>{{ aircraft.vertical_rate }}</td>
                      </tr>
                      <tr>
                          <th>sensors</th>
                          <td>{{ aircraft.sensors }}</td>
                      </tr>
                      <tr>
                          <th>geo_altitude</th>
                          <td>{{ aircraft.geo_altitude }}</td>
                      </tr>
                      <tr>
                          <th>squawk</th>
                          <td>{{ aircraft.squawk }}</td>
                      </tr>
                      <tr>
                          <th>spi</th>
                          <td>{{ aircraft.spi }}</td>
                      </tr>
                  </table>
              </div>
          </yaga-popup>
      </yaga-circle>
  </yaga-map>

</ion-content>

<ion-footer *ngIf="debug">
    <ion-toolbar>
        <ion-item-group>
            <ion-item>
                <ion-label>Latitude</ion-label>
                <ion-input [(ngModel)]="pickerLat"></ion-input>
            </ion-item>
            <ion-item>
                <ion-label>Longitude</ion-label>
                <ion-input [(ngModel)]="pickerLng"></ion-input>
            </ion-item>
        </ion-item-group>
    </ion-toolbar>
</ion-footer>
